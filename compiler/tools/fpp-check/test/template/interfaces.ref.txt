topology P
2
topology P
3
entering expand
[ local path prefix ]/compiler/tools/fpp-check/test/template/interfaces.fpp:42.5
    expand T(interface a1, constant 0)
    ^
param idx
[ local path prefix ]/compiler/tools/fpp-check/test/template/interfaces.fpp:42.37
    expand T(interface a1, constant 0)
                                    ^
constant use idx
[ local path prefix ]/compiler/tools/fpp-check/test/template/interfaces.fpp:47.41
        expand T(interface a2, constant 1)
                                        ^
used by
[ local path prefix ]/compiler/tools/fpp-check/test/template/interfaces.fpp:34.17
            i.a[idx] -> b.b[idx]
                ^
Exception in thread "main" java.util.NoSuchElementException: key not found: 379
	at scala.collection.immutable.BitmapIndexedMapNode.apply(HashMap.scala:635)
	at scala.collection.immutable.HashMap.apply(HashMap.scala:132)
	at fpp.compiler.analysis.CheckExprTypes$.constantUse$$anonfun$1(CheckExprTypes.scala:37)
	at scala.util.Either.map(Either.scala:382)
	at fpp.compiler.analysis.CheckExprTypes$.constantUse(CheckExprTypes.scala:39)
	at fpp.compiler.analysis.BasicUseAnalyzer.exprIdentNode(BasicUseAnalyzer.scala:99)
	at fpp.compiler.analysis.BasicUseAnalyzer.exprIdentNode$(BasicUseAnalyzer.scala:10)
	at fpp.compiler.analysis.CheckExprTypes$.exprIdentNode(CheckExprTypes.scala:8)
	at fpp.compiler.analysis.CheckExprTypes$.exprIdentNode(CheckExprTypes.scala:8)
	at fpp.compiler.ast.AstVisitor.matchExprNode(AstVisitor.scala:188)
	at fpp.compiler.ast.AstVisitor.matchExprNode$(AstVisitor.scala:4)
	at fpp.compiler.analysis.CheckExprTypes$.matchExprNode(CheckExprTypes.scala:8)
	at fpp.compiler.analysis.TypeExpressionAnalyzer.exprNode(TypeExpressionAnalyzer.scala:24)
	at fpp.compiler.analysis.TypeExpressionAnalyzer.exprNode$(TypeExpressionAnalyzer.scala:7)
	at fpp.compiler.analysis.CheckExprTypes$.exprNode(CheckExprTypes.scala:8)
	at fpp.compiler.analysis.BasicUseAnalyzer.connection$4$$anonfun$1$$anonfun$1(BasicUseAnalyzer.scala:122)
	at fpp.compiler.analysis.Analyzer.opt(Analyzer.scala:13)
	at fpp.compiler.analysis.Analyzer.opt$(Analyzer.scala:6)
	at fpp.compiler.analysis.CheckExprTypes$.opt(CheckExprTypes.scala:8)
	at fpp.compiler.analysis.BasicUseAnalyzer.connection$4$$anonfun$1(BasicUseAnalyzer.scala:122)
	at scala.util.Either.flatMap(Either.scala:352)
	at fpp.compiler.analysis.BasicUseAnalyzer.connection$4(BasicUseAnalyzer.scala:125)
	at fpp.compiler.analysis.BasicUseAnalyzer.specConnectionGraphAnnotatedNode$$anonfun$1(BasicUseAnalyzer.scala:130)
	at fpp.compiler.util.Result$.foldLeft(Result.scala:26)
	at fpp.compiler.ast.AstStateVisitor.visitList(AstStateVisitor.scala:25)
	at fpp.compiler.ast.AstStateVisitor.visitList$(AstStateVisitor.scala:6)
	at fpp.compiler.analysis.CheckExprTypes$.visitList(CheckExprTypes.scala:8)
	at fpp.compiler.analysis.BasicUseAnalyzer.specConnectionGraphAnnotatedNode(BasicUseAnalyzer.scala:130)
	at fpp.compiler.analysis.BasicUseAnalyzer.specConnectionGraphAnnotatedNode$(BasicUseAnalyzer.scala:10)
	at fpp.compiler.analysis.CheckExprTypes$.specConnectionGraphAnnotatedNode(CheckExprTypes.scala:8)
	at fpp.compiler.analysis.CheckExprTypes$.specConnectionGraphAnnotatedNode(CheckExprTypes.scala:8)
	at fpp.compiler.ast.AstVisitor.matchTopologyMember(AstVisitor.scala:257)
	at fpp.compiler.ast.AstVisitor.matchTopologyMember$(AstVisitor.scala:4)
	at fpp.compiler.analysis.CheckExprTypes$.matchTopologyMember(CheckExprTypes.scala:8)
	at fpp.compiler.analysis.TopologyAnalyzer.defTopologyAnnotatedNode$$anonfun$1(TopologyAnalyzer.scala:16)
	at fpp.compiler.util.Result$.foldLeft(Result.scala:26)
	at fpp.compiler.ast.AstStateVisitor.visitList(AstStateVisitor.scala:25)
	at fpp.compiler.ast.AstStateVisitor.visitList$(AstStateVisitor.scala:6)
	at fpp.compiler.analysis.CheckExprTypes$.visitList(CheckExprTypes.scala:8)
	at fpp.compiler.analysis.TopologyAnalyzer.defTopologyAnnotatedNode(TopologyAnalyzer.scala:16)
	at fpp.compiler.analysis.TopologyAnalyzer.defTopologyAnnotatedNode$(TopologyAnalyzer.scala:7)
	at fpp.compiler.analysis.CheckExprTypes$.fpp$compiler$analysis$BasicUseAnalyzer$$super$defTopologyAnnotatedNode(CheckExprTypes.scala:8)
	at fpp.compiler.analysis.BasicUseAnalyzer.defTopologyAnnotatedNode$$anonfun$1$$anonfun$2(BasicUseAnalyzer.scala:71)
	at scala.util.Either.flatMap(Either.scala:352)
	at fpp.compiler.analysis.BasicUseAnalyzer.defTopologyAnnotatedNode$$anonfun$1(BasicUseAnalyzer.scala:72)
	at scala.util.Either.flatMap(Either.scala:352)
	at fpp.compiler.analysis.BasicUseAnalyzer.defTopologyAnnotatedNode(BasicUseAnalyzer.scala:72)
	at fpp.compiler.analysis.BasicUseAnalyzer.defTopologyAnnotatedNode$(BasicUseAnalyzer.scala:10)
	at fpp.compiler.analysis.CheckExprTypes$.defTopologyAnnotatedNode(CheckExprTypes.scala:8)
	at fpp.compiler.analysis.CheckExprTypes$.defTopologyAnnotatedNode(CheckExprTypes.scala:8)
	at fpp.compiler.ast.AstVisitor.matchModuleMember(AstVisitor.scala:214)
	at fpp.compiler.ast.AstVisitor.matchModuleMember$(AstVisitor.scala:4)
	at fpp.compiler.analysis.CheckExprTypes$.matchModuleMember(CheckExprTypes.scala:8)
	at fpp.compiler.analysis.ModuleAnalyzer.specTemplateExpandAnnotatedNode$$anonfun$1(ModuleAnalyzer.scala:30)
	at fpp.compiler.util.Result$.foldLeft(Result.scala:26)
	at fpp.compiler.ast.AstStateVisitor.visitList(AstStateVisitor.scala:25)
	at fpp.compiler.ast.AstStateVisitor.visitList$(AstStateVisitor.scala:6)
	at fpp.compiler.analysis.CheckExprTypes$.visitList(CheckExprTypes.scala:8)
	at fpp.compiler.analysis.ModuleAnalyzer.specTemplateExpandAnnotatedNode(ModuleAnalyzer.scala:30)
	at fpp.compiler.analysis.ModuleAnalyzer.specTemplateExpandAnnotatedNode$(ModuleAnalyzer.scala:7)
	at fpp.compiler.analysis.CheckExprTypes$.fpp$compiler$analysis$TemplateExpandAnalyzer$$super$specTemplateExpandAnnotatedNode(CheckExprTypes.scala:8)
	at fpp.compiler.analysis.TemplateExpandAnalyzer.specTemplateExpandAnnotatedNode$$anonfun$2(TemplateExpandAnalyzer.scala:40)
	at scala.util.Either.flatMap(Either.scala:352)
	at fpp.compiler.analysis.TemplateExpandAnalyzer.specTemplateExpandAnnotatedNode(TemplateExpandAnalyzer.scala:41)
	at fpp.compiler.analysis.TemplateExpandAnalyzer.specTemplateExpandAnnotatedNode$(TemplateExpandAnalyzer.scala:7)
	at fpp.compiler.analysis.CheckExprTypes$.fpp$compiler$analysis$BasicUseAnalyzer$$super$specTemplateExpandAnnotatedNode(CheckExprTypes.scala:8)
	at fpp.compiler.analysis.BasicUseAnalyzer.specTemplateExpandAnnotatedNode$$anonfun$1(BasicUseAnalyzer.scala:220)
	at scala.util.Either.flatMap(Either.scala:352)
	at fpp.compiler.analysis.BasicUseAnalyzer.specTemplateExpandAnnotatedNode(BasicUseAnalyzer.scala:221)
	at fpp.compiler.analysis.BasicUseAnalyzer.specTemplateExpandAnnotatedNode$(BasicUseAnalyzer.scala:10)
	at fpp.compiler.analysis.CheckExprTypes$.specTemplateExpandAnnotatedNode(CheckExprTypes.scala:286)
	at fpp.compiler.analysis.CheckExprTypes$.specTemplateExpandAnnotatedNode(CheckExprTypes.scala:283)
	at fpp.compiler.ast.AstVisitor.matchModuleMember(AstVisitor.scala:217)
	at fpp.compiler.ast.AstVisitor.matchModuleMember$(AstVisitor.scala:4)
	at fpp.compiler.analysis.CheckExprTypes$.matchModuleMember(CheckExprTypes.scala:8)
	at fpp.compiler.analysis.ModuleAnalyzer.defModuleAnnotatedNode$$anonfun$1(ModuleAnalyzer.scala:16)
	at fpp.compiler.util.Result$.foldLeft(Result.scala:26)
	at fpp.compiler.ast.AstStateVisitor.visitList(AstStateVisitor.scala:25)
	at fpp.compiler.ast.AstStateVisitor.visitList$(AstStateVisitor.scala:6)
	at fpp.compiler.analysis.CheckExprTypes$.visitList(CheckExprTypes.scala:8)
	at fpp.compiler.analysis.ModuleAnalyzer.defModuleAnnotatedNode(ModuleAnalyzer.scala:16)
	at fpp.compiler.analysis.ModuleAnalyzer.defModuleAnnotatedNode$(ModuleAnalyzer.scala:7)
	at fpp.compiler.analysis.CheckExprTypes$.defModuleAnnotatedNode(CheckExprTypes.scala:8)
	at fpp.compiler.analysis.CheckExprTypes$.defModuleAnnotatedNode(CheckExprTypes.scala:8)
	at fpp.compiler.ast.AstVisitor.matchModuleMember(AstVisitor.scala:209)
	at fpp.compiler.ast.AstVisitor.matchModuleMember$(AstVisitor.scala:4)
	at fpp.compiler.analysis.CheckExprTypes$.matchModuleMember(CheckExprTypes.scala:8)
	at fpp.compiler.ast.AstVisitor.matchTuMember(AstVisitor.scala:265)
	at fpp.compiler.ast.AstVisitor.matchTuMember$(AstVisitor.scala:4)
	at fpp.compiler.analysis.CheckExprTypes$.matchTuMember(CheckExprTypes.scala:8)
	at fpp.compiler.analysis.Analyzer.transUnit$$anonfun$1(Analyzer.scala:18)
	at fpp.compiler.util.Result$.foldLeft(Result.scala:26)
	at fpp.compiler.ast.AstStateVisitor.visitList(AstStateVisitor.scala:25)
	at fpp.compiler.ast.AstStateVisitor.visitList$(AstStateVisitor.scala:6)
	at fpp.compiler.analysis.CheckExprTypes$.visitList(CheckExprTypes.scala:8)
	at fpp.compiler.analysis.Analyzer.transUnit(Analyzer.scala:18)
	at fpp.compiler.analysis.Analyzer.transUnit$(Analyzer.scala:6)
	at fpp.compiler.analysis.CheckExprTypes$.transUnit(CheckExprTypes.scala:8)
	at fpp.compiler.analysis.CheckSemantics$.tuList$$anonfun$2$$anonfun$1$$anonfun$1$$anonfun$2$$anonfun$1$$anonfun$1$$anonfun$1$$anonfun$2$$anonfun$2$$anonfun$2$$anonfun$2$$anonfun$1(CheckSemantics.scala:23)
	at fpp.compiler.util.Result$.foldLeft(Result.scala:26)
	at fpp.compiler.ast.AstStateVisitor.visitList(AstStateVisitor.scala:25)
	at fpp.compiler.ast.AstStateVisitor.visitList$(AstStateVisitor.scala:6)
	at fpp.compiler.analysis.CheckExprTypes$.visitList(CheckExprTypes.scala:8)
	at fpp.compiler.analysis.CheckSemantics$.tuList$$anonfun$2$$anonfun$1$$anonfun$1$$anonfun$2$$anonfun$1$$anonfun$1$$anonfun$1$$anonfun$2$$anonfun$2$$anonfun$2$$anonfun$2(CheckSemantics.scala:23)
	at scala.util.Either.flatMap(Either.scala:352)
	at fpp.compiler.analysis.CheckSemantics$.tuList$$anonfun$2$$anonfun$1$$anonfun$1$$anonfun$2$$anonfun$1$$anonfun$1$$anonfun$1$$anonfun$2$$anonfun$2$$anonfun$2(CheckSemantics.scala:39)
	at scala.util.Either.flatMap(Either.scala:352)
	at fpp.compiler.analysis.CheckSemantics$.tuList$$anonfun$2$$anonfun$1$$anonfun$1$$anonfun$2$$anonfun$1$$anonfun$1$$anonfun$1$$anonfun$2$$anonfun$2(CheckSemantics.scala:39)
	at scala.util.Either.flatMap(Either.scala:352)
	at fpp.compiler.analysis.CheckSemantics$.tuList$$anonfun$2$$anonfun$1$$anonfun$1$$anonfun$2$$anonfun$1$$anonfun$1$$anonfun$1$$anonfun$2(CheckSemantics.scala:39)
	at scala.util.Either.flatMap(Either.scala:352)
	at fpp.compiler.analysis.CheckSemantics$.tuList$$anonfun$2$$anonfun$1$$anonfun$1$$anonfun$2$$anonfun$1$$anonfun$1$$anonfun$1(CheckSemantics.scala:39)
	at scala.util.Either.flatMap(Either.scala:352)
	at fpp.compiler.analysis.CheckSemantics$.tuList$$anonfun$2$$anonfun$1$$anonfun$1$$anonfun$2$$anonfun$1$$anonfun$1(CheckSemantics.scala:39)
	at scala.util.Either.flatMap(Either.scala:352)
	at fpp.compiler.analysis.CheckSemantics$.tuList$$anonfun$2$$anonfun$1$$anonfun$1$$anonfun$2$$anonfun$1(CheckSemantics.scala:39)
	at scala.util.Either.flatMap(Either.scala:352)
	at fpp.compiler.analysis.CheckSemantics$.tuList$$anonfun$2$$anonfun$1$$anonfun$1$$anonfun$2(CheckSemantics.scala:39)
	at scala.util.Either.flatMap(Either.scala:352)
	at fpp.compiler.analysis.CheckSemantics$.tuList$$anonfun$2$$anonfun$1$$anonfun$1(CheckSemantics.scala:39)
	at scala.util.Either.flatMap(Either.scala:352)
	at fpp.compiler.analysis.CheckSemantics$.tuList$$anonfun$2$$anonfun$1(CheckSemantics.scala:39)
	at scala.util.Either.flatMap(Either.scala:352)
	at fpp.compiler.analysis.CheckSemantics$.tuList$$anonfun$2(CheckSemantics.scala:39)
	at scala.util.Either.flatMap(Either.scala:352)
	at fpp.compiler.analysis.CheckSemantics$.tuList(CheckSemantics.scala:39)
	at fpp.compiler.tools.FPPCheck$.command$$anonfun$2(fpp-check.scala:24)
	at scala.util.Either.flatMap(Either.scala:352)
	at fpp.compiler.tools.FPPCheck$.command(fpp-check.scala:29)
	at fpp.compiler.tools.FPPCheck$.toolMain$$anonfun$1(fpp-check.scala:54)
	at fpp.compiler.util.Tool.mainMethod(Tool.scala:20)
	at fpp.compiler.tools.FPPCheck$.toolMain(fpp-check.scala:54)
	at fpp.compiler.tools.FPP$.command(fpp.scala:14)
	at fpp.compiler.tools.FPP$.main$$anonfun$1(fpp.scala:37)
	at fpp.compiler.util.Tool.mainMethod(Tool.scala:20)
	at fpp.compiler.tools.FPP$.main(fpp.scala:37)
	at fpp.compiler.tools.FPP.main(fpp.scala)
